
= class

类生命周期

image::类生命周期.webp[]

== 加载

把类加载到内存中，生成一个 Class 对象

. 通过全类名获取定义此类的二进制字节流
. 将字节流所代表的静态存储结构转换为方法区的运行时数据结构
. 在内存中生成一个代表该类的 Class 对象，作为方法区这些数据的访问入口

== 连接

. 验证类是否正确（文件格式、字节码验证）

=== 验证

image::class验证.webp[]

=== 准备

准备阶段是正式为类变量分配内存并设置类变量初始值的阶段

=== 解析

解析阶段是虚拟机将常量池内的符号引用替换为直接引用的过程。

== 初始化

初始化阶段是执行初始化方法 <clinit> ()方法的过程，是类加载的最后一步，这一步 JVM 才开始真正执行类中定义的 Java 程序代码(字节码)。

== 卸载

卸载类即该类的 Class 对象被 GC。

卸载类需要满足 3 个要求:

. 该类的所有的实例对象都已被 GC，也就是说堆不存在该类的实例对象。
. 该类没有在其他任何地方被引用
. 该类的类加载器的实例已被 GC
